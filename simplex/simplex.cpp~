
#include "stdlib.h"
#include "stdio.h"


float a[100][100] = { 0 };

inline void changerow(float a[100][100], int i, int j,int x,int y)
{
	float temp;
	for (int n = 0; n < y; n++)
	{
		temp = a[i][n];
		a[i][n] = a[j][n];
		a[j][n] = temp;
	}
}

inline void addrow(float a[100][100], int i, int j, float k, int x, int y)
{
	for (int n = 0; n < y; n++)
		a[i][n] = a[i][n]+ k*a[j][n];
}

inline void timerow(float a[100][100], int i, float k, int x, int y)
{
	for (int n = 0; n < y; n++)
		a[i][n] *= k;
}

inline void output(float a[100][100], int x, int y)
{
	printf("-----\n");
	for (int i = 0; i < x; i++){
		for (int j = 0; j < y; j++)
		{
			printf("%g", a[i][j]);
			printf ("	");
		}
		printf("\n");
	}
}

int main()
{
	int x = 4;
	int y = 6;

	int aaa;

	a[0][1] = -2;
	a[0][2] = -3;
	a[1][0] = 8;
	a[2][0] = 16;
	a[3][0] = 12;
	a[1][1] = 1;
	a[1][2] = 2;
	a[1][3] = 1;
	a[2][1] = 4;
	a[2][4] = 1;
	a[3][2] = 4;
	a[3][5] = 1;
	output(a, x, y);

	while (1)
	{
		float min = 0;
		int k = 1;
		for (int i = 1; i < y; i++)
			if (a[0][i] < min)
			{
				min = a[0][i];
				k = i;
			}
		printf( "column select: %g at: %d \n",min,k);
		if (min == 0)break;
		float max = 0;
		int l = 0;
		for (int i = 1; i < y; i++)
			if (a[i][k] > 0)
				if (a[i][k] / a[i][0] > max)
				{
					max = a[i][k] / a[i][0];
					l = i;
				}
		printf("row select: %g at: %d \n",max, l);
		output(a, x, y);
		printf("row times\n");
		timerow(a, l, 1 / a[l][k], x, y);
		output(a, x, y);
		printf("row add\n");
		for (int i = 0; i < y; i++)
			if (i != l && a[i][k] != 0)
				addrow(a, i, l, -a[i][k], x, y);
		output(a, x, y);

	}
	output(a, x, y);
	printf("solution :  ");
	for (int i = 1; i < y; i++)
		if(a[0][i] == 0){
			for (int j = 0; j < x; j++)
			{
				if (a[j][i] == 1)
				{
					printf( "	%g",a[j][0]);
					break;
				}
			}
		}else{
			printf( "	0");
		}
	
	printf ( "	%g\n",a[0][0]);
	return 0;
}
